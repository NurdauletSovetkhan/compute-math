import numpy as np

# Cramer's Rule
# Классический метод решения систем линейных уравнений Ax = b с использованием определителей.
# Каждая переменная x[i] = det(A_i) / det(A), где A_i - матрица A с заменой i-го столбца на b.
# Метод прост для понимания, но неэффективен для больших систем (O(n!) сложность).
# Работает только когда det(A) != 0 (матрица невырожденная).
# Подходит для небольших систем (2x2, 3x3, 4x4).

def cramer(A, b):
    """
    Решение системы линейных уравнений методом Крамера.
    
    Параметры:
        A: матрица коэффициентов (n x n)
        b: вектор правых частей (n,)
    
    Возвращает:
        x: вектор решения (n,)
    """
    A = np.array(A, dtype=float)
    b = np.array(b, dtype=float)
    n = len(b)
    
    # Проверяем, что матрица квадратная
    if A.shape[0] != A.shape[1]:
        raise ValueError("Матрица A должна быть квадратной")
    
    if A.shape[0] != len(b):
        raise ValueError("Размеры матрицы A и вектора b не совпадают")
    
    # Вычисляем определитель основной матрицы
    det_A = np.linalg.det(A)
    
    if abs(det_A) < 1e-10:
        raise ValueError("Матрица вырожденная (det(A) = 0), метод Крамера неприменим")
    
    x = np.zeros(n)
    
    # Для каждой переменной x[i]
    for i in range(n):
        # Создаём копию матрицы A
        A_i = A.copy()
        # Заменяем i-й столбец на вектор b
        A_i[:, i] = b
        # Вычисляем определитель модифицированной матрицы
        det_A_i = np.linalg.det(A_i)
        # x[i] = det(A_i) / det(A)
        x[i] = det_A_i / det_A
    
    return x


def solve(A, b):
    """Обёртка для унификации интерфейса."""
    return cramer(A, b)
